{% extends "base.html" %}

{% block title %}Usu치rios - SysStock{% endblock %}

{% block content %}
<div class="page-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
    <h1>游논 Gerenciar Usu치rios</h1>
    <a href="{{ url_for('usuario_novo') }}" class="btn btn-primary">+ Novo Usu치rio</a>
</div>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Usu치rio</th>
                <th>Nome Completo</th>
                <th>Admin?</th>
                <th>Status</th>
                <th>A칞칫es</th>
            </tr>
        </thead>
        <tbody>
            {% for u in usuarios %}
            <tr>
                <td><strong>{{ u.usuario }}</strong></td>
                <td>{{ u.nome }}</td>
                <td>
                    <span class="badge {{ 'bg-primary' if u.is_admin else 'bg-secondary' }}">
                        {{ 'Sim' if u.is_admin else 'N칚o' }}
                    </span>
                </td>
                <td>
                    <span class="badge {{ 'bg-success' if u.ativo else 'bg-danger' }}">
                        {{ 'Ativo' if u.ativo else 'Inativo' }}
                    </span>
                </td>
                <td>
                    <a href="{{ url_for('usuario_editar', id=u.id) }}" class="btn btn-secondary btn-sm">Editar</a>
                    {# N칚o permite desativar o pr칩prio usu치rio ou o Admin original (id=1) #}
                    {% if u.id != session.user_id and u.id != 1 %} 
                        <a href="{{ url_for('usuario_editar', id=u.id) }}" 
                           class="btn {{ 'btn-danger' if u.ativo else 'btn-success' }} btn-sm"
                           onclick="return confirm('Alterar status do usu치rio?')">
                           {{ 'Desativar' if u.ativo else 'Ativar' }}
                        </a>
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr><td colspan="5" align="center">Nenhum usu치rio cadastrado.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
    .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; color: #fff; display: inline-block; }
    .bg-primary { background-color: #007bff; }
    .bg-secondary { background-color: #6c757d; }
    .bg-success { background-color: #28a745; }
    .bg-danger { background-color: #dc3545; }
</style>
{% endblock %}