{% extends "base.html" %}

{% block title %}{{ 'Editar' if empresa else 'Nova' }} Empresa{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <h1>{{ 'Editar' if empresa else 'Cadastrar' }} Empresa</h1>
    
    <div class="stat-card">
        <form method="POST">
            <div class="form-group">
                <label>Tag de Login * (Sem espaços, ex: zactiti)</label>
                <input type="text" name="tag" required value="{{ empresa.tag if empresa else '' }}" style="text-transform:lowercase" placeholder="Digite a tag da empresa">
            </div>
     <h4>Administrador da Empresa</h4>

                <label>Usuário admin</label>
                <input type="text" name="admin_usuario" required>

                <label>Nome do admin</label>
                <input type="text" name="admin_nome" required>

                <label>Senha do admin</label>
                <input type="password" name="admin_senha" required>

            <div class="form-group">
                <label>Nome da Empresa *</label>
                <input type="text" name="descricao" required value="{{ empresa.descricao if empresa else '' }}" placeholder="Digite o nome completo da empresa">
            </div>

            <h3 style="margin-top:20px; border-bottom:1px solid #eee;">Configuração do Banco de Dados</h3>
            
            <div style="display:grid; grid-template-columns: 3fr 1fr; gap:10px;">
                <div class="form-group">
                    <label>Host (IP)</label>
                    <input type="text" name="host" required value="{{ empresa.host if empresa else '127.0.0.1' }}" placeholder="ex: 127.0.0.1">
                </div>
                <div class="form-group">
                    <label>Porta</label>
                    <input type="number" name="port" required value="{{ empresa.port if empresa else 3306 }}">
                </div>
            </div>

            <div class="form-group">
                <label>Nome do Banco (Schema) *</label>
                <input type="text" name="base" required value="{{ empresa.base if empresa else '' }}" placeholder="ex: estoque_empresa_x">
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div class="form-group">
                    <label>Usuário do Banco</label>
                    <input type="text" name="user" required value="{{ empresa.user if empresa else 'root' }}" placeholder="Usuário com permissão de CREATE DB">
                </div>
                <div class="form-group">
                    <label>Senha do Banco</label>
                    <input type="password" name="pass" value="{{ empresa.pass if empresa else '' }}" placeholder="Senha do Usuário do DB">
                </div>
            </div>

            <div style="margin-top: 20px; display:flex; gap:10px;">
                <button type="submit" class="btn btn-primary" style="flex:1">Salvar e Criar Estrutura</button>
                <a href="{{ url_for('gerenciar_empresas') }}" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}